{"version":3,"file":"component---src-pages-one-time-offer-6-month-roi-strategy-map-checkout-js-f8c4ed0501bd758bfb81.js","mappings":"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","sources":["webpack://assume-wisely-blog/./node_modules/@stripe/stripe-js/dist/index.mjs","webpack://assume-wisely-blog/./src/funnel-0ps/components/StripeCheckout.js","webpack://assume-wisely-blog/./src/funnel-0ps/templates/CheckoutPageTemplate.js","webpack://assume-wisely-blog/./src/pages/one-time-offer/6-month-roi-strategy-map/checkout.js","webpack://assume-wisely-blog/./src/data/oto/6-month-roi-strategy-map.js"],"sourcesContent":["var RELEASE_TRAIN = 'clover';\n\nvar runtimeVersionToUrlVersion = function runtimeVersionToUrlVersion(version) {\n  return version === 3 ? 'v3' : version;\n};\n\nvar ORIGIN = 'https://js.stripe.com';\nvar STRIPE_JS_URL = \"\".concat(ORIGIN, \"/\").concat(RELEASE_TRAIN, \"/stripe.js\");\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar STRIPE_JS_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/(v3|[a-z]+)\\/stripe\\.js(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar isStripeJSURL = function isStripeJSURL(url) {\n  return V3_URL_REGEX.test(url) || STRIPE_JS_URL_REGEX.test(url);\n};\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(ORIGIN, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!isStripeJSURL(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(STRIPE_JS_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"8.5.2\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise$1 = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function (cause) {\n    reject(new Error('Failed to load Stripe.js', {\n      cause: cause\n    }));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise$1 !== null) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise$1[\"catch\"](function (error) {\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var pk = args[0];\n  var isTestKey = pk.match(/^pk_test/); // @ts-expect-error this is not publicly typed\n\n  var version = runtimeVersionToUrlVersion(maybeStripe.version);\n  var expectedVersion = RELEASE_TRAIN;\n\n  if (isTestKey && version !== expectedVersion) {\n    console.warn(\"Stripe.js@\".concat(version, \" was loaded on the page, but @stripe/stripe-js@\").concat(\"8.5.2\", \" expected Stripe.js@\").concat(expectedVersion, \". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning\"));\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise) {\n    return stripePromise;\n  }\n\n  stripePromise = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n  return stripePromise;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import React, { useState, useEffect, useRef } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\n\n/**\n * Stripe Embedded Checkout Component\n * \n * Handles embedded Stripe checkout with client secret from backend.\n * Supports one-click upsell flow by capturing session ID after successful payment.\n * \n * @param {string} priceId - Stripe Price ID for the product (required)\n * @param {string} successUrl - URL to redirect after successful payment (optional)\n * @param {string} cancelUrl - URL to redirect on cancel (optional)\n * @param {boolean} isTest - Whether to use test mode (optional, defaults based on NODE_ENV)\n */\n\n// Configuration Constants\n// Backend API endpoint for creating Stripe checkout sessions\n// This single endpoint handles both test and live mode based on the keys/price IDs used\nconst STRIPE_API_ENDPOINT = 'https://payment.bulldozer.life/ecommerce/create-checkout-session';\n\n// Stripe publishable keys (loaded from credentials/.env via symlink)\nconst STRIPE_PUBLISHABLE_KEY_TEST = process.env.GATSBY_STRIPE_PUBLISHABLE_KEY_TEST;\nconst STRIPE_PUBLISHABLE_KEY_PROD = process.env.GATSBY_STRIPE_PUBLISHABLE_KEY_PROD;\n\nconst StripeCheckout = ({ priceId, successUrl, cancelUrl, isTest = false }) => {\n  // Determine which Stripe key to use based on isTest prop\n  // Default is LIVE mode (isTest = false), only use test keys when explicitly set to true\n  const STRIPE_PUBLISHABLE_KEY = isTest ? STRIPE_PUBLISHABLE_KEY_TEST : STRIPE_PUBLISHABLE_KEY_PROD;\n  \n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [clientSecret, setClientSecret] = useState('');\n  const [sessionId, setSessionId] = useState('');\n  const checkoutRef = useRef(null);\n  const stripePromise = useRef(null);\n  const checkoutInstance = useRef(null);\n\n  // Initialize Stripe\n  useEffect(() => {\n    if (!stripePromise.current) {\n      stripePromise.current = loadStripe(STRIPE_PUBLISHABLE_KEY);\n    }\n  }, []);\n\n  // Fetch client secret from backend\n  useEffect(() => {\n    const createCheckoutSession = async () => {\n      if (!priceId) {\n        setError('Product price ID is required');\n        setIsLoading(false);\n        return;\n      }\n\n      // Create abort controller for timeout handling\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\n\n      try {\n        const baseUrl = typeof window !== 'undefined' ? window.location.origin : '';\n        const defaultSuccessUrl = successUrl || `${baseUrl}/thankyou`;\n        const defaultCancelUrl = cancelUrl || (typeof window !== 'undefined' ? window.location.href.split('?')[0] : '');\n        \n        const response = await fetch(STRIPE_API_ENDPOINT, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            priceId: priceId,\n            productType: 'offer', // Backend expects 'offer' or 'oto'\n            successUrl: defaultSuccessUrl,\n            cancelUrl: defaultCancelUrl,\n            isTest: isTest, // Pass test mode flag to backend\n          }),\n          signal: controller.signal,\n        });\n\n        clearTimeout(timeoutId);\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.error?.message || `Server error: ${response.status}`);\n        }\n\n        const data = await response.json();\n        \n        if (!data.success || !data.clientSecret) {\n          throw new Error(data.error?.message || 'No client secret received from server');\n        }\n        \n        setClientSecret(data.clientSecret);\n        if (data.sessionId) {\n          setSessionId(data.sessionId);\n        }\n        \n      } catch (err) {\n        clearTimeout(timeoutId);\n        \n        // Handle specific error types\n        let errorMessage = 'Unable to initialize checkout. Please try again.';\n        \n        if (err.name === 'AbortError') {\n          errorMessage = 'Request timed out. Please check your internet connection and try again.';\n        } else if (err.message.includes('Failed to fetch') || err.message.includes('NetworkError')) {\n          errorMessage = 'Network error. Please check your internet connection and try again.';\n        } else if (err.message) {\n          errorMessage = err.message;\n        }\n        \n        setError(errorMessage);\n        console.error('Checkout initialization error:', err);\n        setIsLoading(false);\n      }\n    };\n\n    createCheckoutSession();\n  }, [priceId, successUrl, cancelUrl, isTest]);\n\n  // Initialize embedded checkout when client secret is available\n  useEffect(() => {\n    const initializeCheckout = async () => {\n      if (!clientSecret || !checkoutRef.current) return;\n\n      try {\n        const stripe = await stripePromise.current;\n        \n        if (!stripe) {\n          throw new Error('Failed to load Stripe');\n        }\n\n        // Mount embedded checkout\n        const checkout = await stripe.initEmbeddedCheckout({\n          clientSecret,\n        });\n\n        if (!checkout) {\n          throw new Error('Failed to initialize Stripe checkout');\n        }\n\n        checkout.mount(checkoutRef.current);\n        checkoutInstance.current = checkout;\n        setIsLoading(false);\n\n        // Listen for checkout completion (if supported)\n        if (typeof checkout.on === 'function') {\n          checkout.on('complete', () => {\n            handleCheckoutComplete();\n          });\n        }\n\n      } catch (err) {\n        setError(err.message || 'Failed to initialize embedded checkout. Please try again.');\n        console.error('Embedded checkout error:', err);\n        setIsLoading(false);\n      }\n    };\n\n    initializeCheckout();\n\n    // Cleanup\n    return () => {\n      if (checkoutInstance.current) {\n        checkoutInstance.current.destroy();\n      }\n    };\n  }, [clientSecret]);\n\n  // Handle successful checkout completion\n  const handleCheckoutComplete = () => {\n    // Extract session ID from URL or use stored session ID\n    const urlParams = new URLSearchParams(window.location.search);\n    const sessionIdFromUrl = urlParams.get('session_id');\n    const finalSessionId = sessionIdFromUrl || sessionId;\n\n    console.log('Checkout complete - Session ID:', finalSessionId);\n\n    // Redirect to success URL with session ID for one-click upsell\n    if (successUrl) {\n      const separator = successUrl.includes('?') ? '&' : '?';\n      const redirectUrl = finalSessionId \n        ? `${successUrl}${separator}session=${finalSessionId}`\n        : successUrl;\n      console.log('Redirecting to:', redirectUrl);\n      window.location.href = redirectUrl;\n    }\n  };\n\n  // Retry initialization\n  const handleRetry = () => {\n    setError('');\n    setIsLoading(true);\n    setClientSecret('');\n    // Re-trigger useEffect by clearing and resetting\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"w-full\">\n      {error && (\n        <div className=\"mb-4 p-4 rounded-lg bg-red-100 border border-red-400 text-red-700\">\n          <p className=\"font-semibold mb-2\">Payment Error</p>\n          <p className=\"mb-3\">{error}</p>\n          <button\n            onClick={handleRetry}\n            className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded transition duration-200\"\n          >\n            Retry\n          </button>\n        </div>\n      )}\n      \n      {isLoading && !error && (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4\"></div>\n            <p className=\"text-gray-600\">Loading secure checkout...</p>\n          </div>\n        </div>\n      )}\n      \n      <div \n        ref={checkoutRef} \n        className={isLoading || error ? 'hidden' : ''} \n        style={{ backgroundColor: '#ffffff' }}\n      ></div>\n    </div>\n  );\n};\n\nexport default StripeCheckout;\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport StripeCheckout from '../components/StripeCheckout'\n\n/**\n * Checkout Page Template\n * \n * Reusable template for checkout pages that handles all boilerplate:\n * - Helmet/SEO configuration\n * - Test mode detection and banner\n * - StripeCheckout component integration\n * - Responsive layout\n * \n * @param {Object} offerData - Offer configuration object (required)\n * @param {string} successUrl - URL to redirect after successful payment (optional)\n * @param {string} cancelUrl - URL to redirect on cancel (optional)\n */\nconst CheckoutPageTemplate = ({ \n  offerData, \n  successUrl, \n  cancelUrl \n}) => {\n  // Validate required props\n  if (!offerData) {\n    throw new Error('CheckoutPageTemplate requires offerData prop')\n  }\n\n  // Determine if we're in test mode\n  const isTest = process.env.GATSBY_ISTEST === 'true'\n  \n  // Select the correct price ID based on test mode\n  const priceId = isTest ? offerData.stripe.test_priceId : offerData.stripe.price_id\n\n  return (\n    <div \n      className=\"min-h-screen\"\n      style={{\n        background: 'linear-gradient(135deg, #e9ebee 0%, #f5f7fa 50%, #e9ebee 100%)'\n      }}\n    >\n      <Helmet>\n        <title>Checkout - {offerData.meta.title}</title>\n        <meta name=\"description\" content={`Complete your purchase of ${offerData.meta.title}`} />\n        <meta name=\"robots\" content=\"noindex, nofollow\" />\n      </Helmet>\n\n      {/* Page Container - \"Sheet of Paper\" Effect with minimal border */}\n      <div style={{ margin: '0.5rem', padding: '0.25rem' }}>\n        <div \n          className=\"bg-white overflow-hidden\"\n          style={{\n            minHeight: 'calc(100vh - 1rem)'\n          }}\n        >\n          {/* Test Mode Banner */}\n          {isTest && (\n            <div className=\"bg-yellow-400 text-black text-center py-2 px-4 font-bold\">\n              ‚ö†Ô∏è TEST MODE - Using test Stripe keys and test price IDs\n            </div>\n          )}\n\n          {/* Embedded Checkout - Full Width */}\n          <StripeCheckout\n            priceId={priceId}\n            successUrl={successUrl}\n            cancelUrl={cancelUrl}\n            isTest={isTest}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CheckoutPageTemplate\n","import React from 'react'\nimport CheckoutPageTemplate from '../../../funnel-0ps/templates/CheckoutPageTemplate'\nimport offerData from '../../../data/oto/6-month-roi-strategy-map'\n\n/**\n * OTO Checkout Page: 6 Month ROI Strategy Map\n * \n * Embedded Stripe checkout for the OTO.\n * On successful payment, redirects to thank you page.\n * On cancel, redirects back to OTO offer page.\n * \n * Requirements: 4.3, 4.4\n */\n\nconst OTOCheckoutPage = () => {\n  // Get base URL for constructing success/cancel URLs\n  const baseUrl = typeof window !== 'undefined' ? window.location.origin : ''\n  \n  // Success URL: Thank you page (end of funnel)\n  const successUrl = `${baseUrl}/thankyou/`\n  \n  // Cancel URL: Back to OTO offer page\n  const cancelUrl = `${baseUrl}/one-time-offer/6-month-roi-strategy-map/`\n\n  return (\n    <CheckoutPageTemplate\n      offerData={offerData}\n      successUrl={successUrl}\n      cancelUrl={cancelUrl}\n    />\n  )\n}\n\nexport default OTOCheckoutPage\n","/**\n * OTO Offer Data: 6 Month ROI Strategy Map\n * \n * This file contains all the content and configuration for this specific OTO.\n * To create a new OTO, duplicate this file and update the values.\n */\n\nexport const offerData = {\n    // Stripe Configuration\n    stripe: {\n        test_priceId: 'price_1SRelR2uBHxDuQdEMEhiXlL7', // Test price ID\n        price_id: 'price_1SUcG22w8fx5rDMTenBkc2Qn'     // Live price ID - replace with actual\n    },\n\n    // Meta Information (SEO)\n    meta: {\n        title: \"6 Month ROI Strategy Map: One Time Offer\",\n        description: \"A step-by-step roadmap to prioritize fast, visible wins that free up bandwidth and prove bottom-line value.\",\n        keywords: \"ROI strategy, roi product strategy, business planning\",\n        author: \"Rho Lall\"\n    },\n\n    // Pre-Hero Section (appears before main headline)\n    pre_hero_section: {\n        // Text that appears above the progress bar\n        text_above_progress: \"ONE LAST STOP . . .\",\n        \n        // Progress bar configuration\n        progress_bar: {\n            width: '80%',                                                    // How full the bar appears (e.g., '60%', '80%', '100%')\n            gradient: 'linear-gradient(90deg, #3B82F6 0%, #8B5CF6 100%)',  // Color gradient for the bar\n            text: \"Progressing...\"                                          // Text inside the bar (can be overridden by progressText prop in page)\n        },\n        \n        // Text that appears below the progress bar (optional)\n        text_below_progress: \"The AI roadmap that pays for itself\"  // Leave empty or add text like \"Just one more step...\"\n    },\n\n    // Hero Section (main offer headline and pricing)\n    hero_section: {\n        headline: \"üöÄ The 6-Month ROI Strategy Map\",        // Main headline\n        sub_headline: \"Limited Release Offer $297\"          // Sub-headline (typically the price)\n    },\n\n    // Product Section (detailed offer description)\n    product_section: {\n        // Product image (optional - leave empty if no image)\n        image_path: \"../images/me_t2.png\",                                  // Path to product image (relative to src/pages)\n        image_alt: \"6 Month ROI Strategy Map\",                              // Alt text for image\n        \n        // Product description (markdown supported)\n        copy: `Experts caution: ‚ÄúDon‚Äôt expect ROI from AI for at least 2 years.‚Äù\n\nThey say you're not ready.\n\nThey say your culture's not ready.  \nThey say you need more time.  \nBut you don‚Äôt get time.  \nYou need results this year.\n\n**This guide to shows you how.**\n\n\n## üîì Special Alpha Release: Just $297\n\n‚úÖ 6-Month ROI Roadmap\nA step-by-step roadmap to prioritize fast, visible wins that free up bandwidth and prove bottom-line value.\n\n‚úÖ ROI Calculator (Not Just Hours)\nClearly define your return on investment. Quantify impact across revenue, cost savings, time reclaimed, and even intangibles.\n\n‚úÖ Adoption-Ready Playbook & Case Studies\nDeliver 8X - 13X results. Do twice the work in half the time.\n\n‚úÖ AI Strategy Power Hour (Live 1:1)\nBring your backlog, blockers, & blind spots.\nGet personal clarity and direction in this 1:1 session.\n\n‚ö†Ô∏è Most teams fail because they overbuild and under-communicate.\nThis map flips that. It‚Äôs lean, fast, and built for buy-in.\n\n‚ö†Ô∏è Most teams fail because they overbuild and under-communicate.\n\nThis map flips that. It‚Äôs lean, fast, and built for buy-in.\n\nYou‚Äôre getting first access and personalized strategy before it hits the market.\n\n## Limit 5 clients.\n\n- You‚Äôll get live 1:1 support tailored to your needs\n- You‚Äôll help shape these tools as they‚Äôre finalized\n- You‚Äôll pay just $297 instead of the final $497 price\n\nSave $200 now ‚Äî this bundle will increase to $497.\n\n`\n    },\n\n    // Offer Section (appears after product copy, before buttons - centered)\n    offer_section: {\n        headline: \"Total VALUE: $4597\",                       // Main offer headline (centered)\n        sub_headline: \"Get this One-Time-Offer for Only $297\"        // Offer subheadline (centered)\n    },\n\n    // CTA Section (bottom call-to-action)\n    cta_section: {\n        headline: \"Get Your 6 Month ROI Strategy Map Now!\",\n    },\n\n    // Button Text (optional - leave empty to use defaults)\n    buttons: {\n        primary_text: \"\",           // Default: \"Yes, I Want This\"\n        secondary_text: \"\"          // Default: \"No thanks, take me to my purchase\"\n    },\n\n    // Visual Styling\n    colors: {\n        accent_color: \"rgb(59, 130, 246)\",\n        background_dark: \"rgba(19, 47, 69)\",\n        price_color: \"red\",\n        value_color: \"green\"\n    },\n\n    // Timer Configuration\n    show_timer: true,                           // Set to false to hide timer\n    timer_minutes: 5                            // Countdown duration in minutes\n}\n\nexport default offerData\n"],"names":["stripePromise","RELEASE_TRAIN","ORIGIN","STRIPE_JS_URL","concat","V3_URL_REGEX","STRIPE_JS_URL_REGEX","EXISTING_SCRIPT_MESSAGE","isStripeJSURL","url","test","injectScript","params","queryString","advancedFraudSignals","script","document","createElement","src","headOrBody","head","body","Error","appendChild","stripePromise$1","onErrorListener","onLoadListener","loadScript","Promise","resolve","reject","window","Stripe","console","warn","scripts","querySelectorAll","i","length","findScript","_script$parentNode","removeEventListener","parentNode","removeChild","onLoad","cause","onError","addEventListener","error","loadCalled","getStripePromise","then","loadStripe","_len","arguments","args","Array","_key","startTime","Date","now","maybeStripe","isTestKey","match","version","runtimeVersionToUrlVersion","expectedVersion","stripe","apply","undefined","_registerWrapper","name","registerWrapper","initStripe","_ref","priceId","successUrl","cancelUrl","isTest","STRIPE_PUBLISHABLE_KEY","process","isLoading","setIsLoading","useState","setError","clientSecret","setClientSecret","sessionId","setSessionId","checkoutRef","useRef","checkoutInstance","useEffect","current","async","controller","AbortController","timeoutId","setTimeout","abort","baseUrl","location","origin","defaultSuccessUrl","defaultCancelUrl","href","split","response","fetch","method","headers","JSON","stringify","productType","signal","clearTimeout","ok","_errorData$error","errorData","json","catch","message","status","data","_data$error","success","err","errorMessage","includes","createCheckoutSession","checkout","initEmbeddedCheckout","mount","on","handleCheckoutComplete","initializeCheckout","destroy","finalSessionId","URLSearchParams","search","get","log","separator","redirectUrl","React","className","onClick","handleRetry","reload","ref","style","backgroundColor","offerData","price_id","background","Helmet","meta","title","content","margin","padding","minHeight","StripeCheckout","OTOCheckoutPage","CheckoutPageTemplate","test_priceId","description","keywords","author","pre_hero_section","text_above_progress","progress_bar","width","gradient","text","text_below_progress","hero_section","headline","sub_headline","product_section","image_path","image_alt","copy","offer_section","cta_section","buttons","primary_text","secondary_text","colors","accent_color","background_dark","price_color","value_color","show_timer","timer_minutes"],"sourceRoot":""}